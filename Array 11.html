<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Array Math Challenge</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #333;
            text-align: center;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .game-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: 90%;
            max-width: 500px;
            margin-bottom: 20px;
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 10px;
            background-color: #f8f9f9;
            border-radius: 5px;
        }

        .target-number {
            font-weight: bold;
            color: #e74c3c;
        }

        .moves-left {
            font-weight: bold;
            color: #3498db;
        }

        .array-display {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .cell {
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #ecf0f1;
            border-radius: 5px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        .cell:hover {
            background-color: #d6eaf8;
        }

        .cell.current {
            background-color: #3498db;
            color: white;
        }

        .controls {
            margin-top: 20px;
        }

        .operation-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        button {
            padding: 10px;
            border: none;
            border-radius: 5px;
            background-color: #2ecc71;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        button:hover {
            background-color: #27ae60;
            transform: translateY(-2px);
        }

        button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        #newGameBtn {
            background-color: #3498db;
            margin-top: 10px;
            width: 100%;
        }

        #newGameBtn:hover {
            background-color: #2980b9;
        }

        .status {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            background-color: #f8f9f9;
        }

        .current-number {
            font-size: 20px;
            font-weight: bold;
            color: #3498db;
        }

        .message {
            margin-top: 10px;
            min-height: 40px;
            font-weight: bold;
        }

        .instructions {
            margin-top: 20px;
            background-color: #f8f9f9;
            padding: 15px;
            border-radius: 5px;
            width: 90%;
            max-width: 500px;
        }

        .win-message {
            color: #2ecc71;
            font-size: 20px;
            animation: pulse 1s infinite;
        }

        .lose-message {
            color: #e74c3c;
            font-size: 20px;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @media (max-width: 500px) {
            .cell {
                height: 50px;
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <h1>Array Math Challenge</h1>
    
    <div class="game-container">
        <div class="game-info">
            <div>Target: <span class="target-number" id="targetNumber">0</span></div>
            <div>Moves left: <span class="moves-left" id="movesLeft">11</span></div>
        </div>
        
        <div class="array-display" id="arrayDisplay">
            <!-- Cells will be generated by JavaScript -->
        </div>
        
        <div class="controls">
            <div class="operation-buttons">
                <button id="addBtn">Add (+)</button>
                <button id="subtractBtn">Subtract (-)</button>
                <button id="multiplyBtn">Multiply (Ã—)</button>
                <button id="divideBtn">Divide (Ã·)</button>
            </div>
            
            <div class="status">
                <p>Current number: <span class="current-number" id="currentNumber">0</span></p>
                <div class="message" id="message">Select an operation and click a cell</div>
            </div>
            
            <button id="newGameBtn">New Game</button>
        </div>
    </div>
    
    <div class="instructions">
        <h3>How to Play:</h3>
        <ol>
            <li>Start at the top-left cell (position 0,0)</li>
            <li>Select an operation (Add, Subtract, Multiply, or Divide)</li>
            <li>Click on another cell to move there and perform the operation</li>
            <li>Reach the target number in 11 moves or less to win</li>
            <li>If you don't reach the target in 11 moves, you lose</li>
        </ol>
    </div>

    <script>
        // Game state
        const gameState = {
            array: [],
            currentPosition: { x: 0, y: 0 },
            currentNumber: 0,
            targetNumber: 0,
            movesLeft: 11,
            operation: null,
            gameActive: true
        };

        // DOM elements
        const arrayDisplay = document.getElementById('arrayDisplay');
        const currentNumberDisplay = document.getElementById('currentNumber');
        const targetNumberDisplay = document.getElementById('targetNumber');
        const movesLeftDisplay = document.getElementById('movesLeft');
        const messageDisplay = document.getElementById('message');
        const newGameBtn = document.getElementById('newGameBtn');
        const operationButtons = {
            add: document.getElementById('addBtn'),
            subtract: document.getElementById('subtractBtn'),
            multiply: document.getElementById('multiplyBtn'),
            divide: document.getElementById('divideBtn')
        };

        // Initialize the game
        function initGame() {
            // Create 3x3 array with random numbers between 1-9
            gameState.array = Array.from({ length: 3 }, () => 
                Array.from({ length: 3 }, () => Math.floor(Math.random() * 9) + 1)
            );

            // Generate random target number between 10 and 69
            gameState.targetNumber = Math.floor(Math.random() * 60) + 10;
            
            // Reset game state
            gameState.currentPosition = { x: 0, y: 0 };
            gameState.currentNumber = gameState.array[0][0];
            gameState.movesLeft = 11;
            gameState.operation = null;
            gameState.gameActive = true;

            // Update display
            renderArray();
            updateTargetNumber();
            updateCurrentNumber();
            updateMovesLeft();
            updateMessage("Select an operation and click a cell");
            
            // Enable operation buttons
            Object.values(operationButtons).forEach(btn => {
                btn.disabled = false;
            });
        }

        // End the game with win/lose state
        function endGame(isWin) {
            gameState.gameActive = false;
            
            // Disable operation buttons
            Object.values(operationButtons).forEach(btn => {
                btn.disabled = true;
            });
            
            if (isWin) {
                messageDisplay.innerHTML = '<span class="win-message">You won! ðŸŽ‰ Click "New Game" to play again</span>';
            } else {
                messageDisplay.innerHTML = `<span class="lose-message">Game over! Target was ${gameState.targetNumber}. Try again!</span>`;
            }
        }

        // Render the array
        function renderArray() {
            arrayDisplay.innerHTML = '';
            
            gameState.array.forEach((row, x) => {
                row.forEach((value, y) => {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.textContent = value;
                    cell.dataset.x = x;
                    cell.dataset.y = y;
                    
                    // Highlight current position
                    if (x === gameState.currentPosition.x && y === gameState.currentPosition.y) {
                        cell.classList.add('current');
                    }
                    
                    cell.addEventListener('click', () => handleCellClick(x, y));
                    arrayDisplay.appendChild(cell);
                });
            });
        }

        // Handle cell clicks
        function handleCellClick(x, y) {
            if (!gameState.gameActive) return;
            if (!gameState.operation) {
                updateMessage("Please select an operation first");
                return;
            }

            // Check if position is different from current
            if (x === gameState.currentPosition.x && y === gameState.currentPosition.y) {
                updateMessage("You're already here! Choose a different cell");
                return;
            }

            const nextNumber = gameState.array[x][y];
            let operationSymbol = '';
            let result = gameState.currentNumber;

            // Perform the operation
            switch (gameState.operation) {
                case 'add':
                    result += nextNumber;
                    operationSymbol = '+';
                    break;
                case 'subtract':
                    result -= nextNumber;
                    operationSymbol = '-';
                    break;
                case 'multiply':
                    result *= nextNumber;
                    operationSymbol = 'Ã—';
                    break;
                case 'divide':
                    if (nextNumber === 0) {
                        updateMessage("Cannot divide by zero! Choose another cell");
                        return;
                    }
                    result = Math.floor(result / nextNumber);
                    operationSymbol = 'Ã·';
                    break;
            }

            // Update game state
            gameState.currentPosition = { x, y };
            gameState.currentNumber = result;
            gameState.operation = null;
            gameState.movesLeft--;

            // Update display
            renderArray();
            updateCurrentNumber();
            updateMovesLeft();
            
            // Check win/lose conditions
            if (gameState.currentNumber === gameState.targetNumber) {
                endGame(true);
                return;
            }
            
            if (gameState.movesLeft <= 0) {
                endGame(false);
                return;
            }
            
            updateMessage(
                `${gameState.currentNumber} ${operationSymbol} ${nextNumber} = ${result}. ` +
                `${gameState.movesLeft} `
            );
            
            // Reset operation buttons
            Object.values(operationButtons).forEach(btn => {
                btn.disabled = false;
            });
        }

        // Update current number display
        function updateCurrentNumber() {
            currentNumberDisplay.textContent = gameState.currentNumber;
        }

        // Update target number display
        function updateTargetNumber() {
            targetNumberDisplay.textContent = gameState.targetNumber;
        }

        // Update moves left display
        function updateMovesLeft() {
            movesLeftDisplay.textContent = gameState.movesLeft;
        }

       

        // Set up operation buttons
        operationButtons.add.addEventListener('click', () => {
            if (!gameState.gameActive) return;
            gameState.operation = 'add';
            updateMessage("Now click on a cell to add its value");
            disableOtherButtons('add');
        });

        operationButtons.subtract.addEventListener('click', () => {
            if (!gameState.gameActive) return;
            gameState.operation = 'subtract';
            updateMessage("Now click on a cell to subtract its value");
            disableOtherButtons('subtract');
        });

        operationButtons.multiply.addEventListener('click', () => {
            if (!gameState.gameActive) return;
            gameState.operation = 'multiply';
            updateMessage("Now click on a cell to multiply by its value");
            disableOtherButtons('multiply');
        });

        operationButtons.divide.addEventListener('click', () => {
            if (!gameState.gameActive) return;
            gameState.operation = 'divide';
            updateMessage("Now click on a cell to divide by its value");
            disableOtherButtons('divide');
        });

        // Disable other operation buttons when one is selected
        function disableOtherButtons(selectedOperation) {
            Object.entries(operationButtons).forEach(([operation, btn]) => {
                btn.disabled = operation !== selectedOperation;
            });
        }

        // New game button
        newGameBtn.addEventListener('click', initGame);

        // Start the game
        initGame();
    </script>
</body>
</html>

